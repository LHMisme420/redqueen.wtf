FROM pytorch/pytorch:2.4.0-cuda12.4-cudnn9-runtime

WORKDIR /app
COPY . /app

RUN pip install -r requirements.txt --extra-index-url https://download.pytorch.org/whl/cu124
RUN pip install flash-attn --no-build-isolation

# RunPod handler (expects /handler endpoint)
COPY handler.py /app/handler.py

EXPOSE 8000
CMD ["python", "handler.py"]
